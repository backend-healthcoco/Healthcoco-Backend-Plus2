<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="mongo-prescription" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="65e18796-75cd-43e5-a229-2b6805657791">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="mongo-drug-dataset" uuid="cd02c4d7-5545-4ec7-a182-ce64f1316ba8">
		<parameter name="drugId" class="java.util.List"/>
		<queryString language="MongoDbQuery">
			<![CDATA[{
	collectionName : 'drug_cl',
	findQuery : {
		'_id' : {'$in' : $P{drugId}}
	}
}]]>
		</queryString>
		<field name="_class" class="java.lang.String"/>
		<field name="_id" class="org.bson.types.ObjectId"/>
		<field name="createdTime" class="java.util.Date"/>
		<field name="dId" class="java.lang.String"/>
		<field name="description" class="java.lang.String"/>
		<field name="discarded" class="java.lang.Boolean"/>
		<field name="drugCode" class="java.lang.String"/>
		<field name="drugName" class="java.lang.String"/>
		<field name="drugType.type" class="java.lang.String"/>
		<field name="genericNames" class="java.util.List"/>
		<field name="strength.strengthUnit.unit" class="java.lang.String"/>
		<field name="strength.value" class="java.lang.String"/>
		<field name="updatedTime" class="java.util.Date"/>
	</subDataset>
	<parameter name="drugIds" class="java.util.List"/>
	<parameter name="prescriptionId" class="java.lang.String"/>
	<queryString language="MongoDbQuery">
		<![CDATA[{
        'collectionName' : 'prescription_cl',
         'findQuery' : { '_id': {'$oid':'$P!{prescriptionId}'}}
    }]]>
	</queryString>
	<field name="_class" class="java.lang.String"/>
	<field name="_id" class="org.bson.types.ObjectId"/>
	<field name="createdBy" class="java.lang.String"/>
	<field name="createdTime" class="java.util.Date"/>
	<field name="discarded" class="java.lang.Boolean"/>
	<field name="doctorId" class="java.lang.String"/>
	<field name="hospitalId" class="java.lang.String"/>
	<field name="inHistory" class="java.lang.Boolean"/>
	<field name="items" class="java.util.List"/>
	<field name="locationId" class="java.lang.String"/>
	<field name="name" class="java.lang.String"/>
	<field name="patientId" class="java.lang.String"/>
	<field name="prescriptionCode" class="java.lang.String"/>
	<field name="updatedTime" class="java.util.Date"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="47" splitType="Stretch">
			<textField>
				<reportElement x="226" y="27" width="100" height="20" uuid="956ace11-204f-461b-b3ff-9a2ceabbdfaf"/>
				<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20" uuid="82d8960c-e5ce-4fa0-a21c-824abfbc6150"/>
				<text><![CDATA[Prescription Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="355" y="0" width="100" height="20" uuid="99bd8506-4f89-4767-909d-e35731d17ec9"/>
				<text><![CDATA[Patient ID]]></text>
			</staticText>
			<textField>
				<reportElement x="100" y="0" width="100" height="20" uuid="b586a3f3-f0ac-4d58-8c5e-a98878d513f6"/>
				<textFieldExpression><![CDATA[$F{prescriptionCode}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="0" width="100" height="20" uuid="d0d89ae3-2f84-4a3c-bd23-8dd5c569faa7"/>
				<textFieldExpression><![CDATA[$F{patientId}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="291" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="20" uuid="82ca3bb5-8889-40c4-827e-6da8f39142fa"/>
				<text><![CDATA[Prescription Items]]></text>
			</staticText>
			<componentElement>
				<reportElement key="table 6" style="table 6" x="0" y="20" width="555" height="140" uuid="ee9174ee-0e49-43fd-966c-d146d2f844d5"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="mongo-drug-dataset" uuid="c33f1f11-e478-42f3-9472-273a34b14746">
						<datasetParameter name="drugId">
							<datasetParameterExpression><![CDATA[$P{drugIds}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="179" uuid="baec68f4-5097-449b-8e7b-12157686cdf8">
						<jr:tableHeader style="table 6_TH" height="30" rowSpan="1"/>
						<jr:tableFooter style="table 6_TH" height="30" rowSpan="1"/>
						<jr:columnHeader style="table 6_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="10611b09-215c-47fe-adc3-592906501dd7"/>
								<text><![CDATA[Description]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 6_CH" height="30" rowSpan="1"/>
						<jr:detailCell style="table 6_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="9aeb6dd1-2f37-46ce-bf33-b292844b71c0"/>
								<textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="5aa0d48f-5329-453b-af13-183273ef27e0">
						<jr:tableHeader style="table 6_TH" height="30" rowSpan="1"/>
						<jr:tableFooter style="table 6_TH" height="30" rowSpan="1"/>
						<jr:columnHeader style="table 6_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="58efeddb-a548-41ab-b541-ac2c4ddf829f"/>
								<text><![CDATA[DrugName]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 6_CH" height="30" rowSpan="1"/>
						<jr:detailCell style="table 6_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="fc77f387-857d-4d5a-8e87-4c17eb3e9f2b"/>
								<textFieldExpression><![CDATA[$F{drugName}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="ab80aa2f-14af-41b6-9b1b-125695192d92">
						<jr:tableHeader style="table 6_TH" height="30" rowSpan="1"/>
						<jr:tableFooter style="table 6_TH" height="30" rowSpan="1"/>
						<jr:columnHeader style="table 6_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="84b71ae9-15a4-42d5-b0a5-2bef7b2bfd2d"/>
								<text><![CDATA[Strength]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 6_CH" height="30" rowSpan="1"/>
						<jr:detailCell style="table 6_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="fe267664-78bb-4c5c-9810-1a3d5164cef6"/>
								<textFieldExpression><![CDATA[$F{strength.strengthUnit.unit}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="285" uuid="2991d6f5-f8e2-4093-b9d5-2bdc6eaa03dd">
						<jr:tableHeader style="table 6_TH" height="30" rowSpan="1"/>
						<jr:tableFooter style="table 6_TH" height="30" rowSpan="1"/>
						<jr:columnHeader style="table 6_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="1c3a7a24-5fa6-4f88-b863-e8c6cb821a70"/>
								<text><![CDATA[Strength Value]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 6_CH" height="30" rowSpan="1"/>
						<jr:detailCell style="table 6_TD" height="20" rowSpan="1">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="4091a99e-9b5a-4b0b-8251-c2086dcf5f74"/>
								<textFieldExpression><![CDATA[$F{strength.value}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
</jasperReport>
